(window["webpackJsonpguismi-app"]=window["webpackJsonpguismi-app"]||[]).push([[0],{107:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(26),r=(a(94),a(4)),c=a(5),l=a(9),o=a(7),d=a(8),h=(a(95),a(85)),u=a(29),m=a(74),p=a(31),f=function(){function e(){Object(r.a)(this,e),this.headers=void 0,this.headers=new Headers,this.headers.append("Content-Type","application/json")}return Object(c.a)(e,null,[{key:"getMyHeaders",value:function(){return null!==this._myHeaders&&void 0!==this._myHeaders||(this._myHeaders=new e),this._myHeaders.headers}},{key:"add",value:function(t,a){e.getMyHeaders().append(t,a)}},{key:"delete",value:function(t){e.getMyHeaders().delete(t)}},{key:"resetMyHeaders",value:function(){this._myHeaders=new e}}]),e}();f._myHeaders=void 0;var v={login:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t}),credentials:"include"};return fetch("/api/auth/callback",a).then((function(e){return e})).then(E).then((function(a){return a&&(a.authdata=window.btoa(e+":"+t),localStorage.setItem("user",JSON.stringify(a))),a}))},logout:b};function b(){localStorage.removeItem("user")}function E(e){return e.then((function(e){return f.getMyHeaders(),e})).text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){401===e.status&&b();var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}var y=a(21),g=a.n(y),k=a(27),O=a.n(k),C=a(35),j=a.n(C),w=a(13),S=a.n(w),D=a(19),H=a.n(D),F=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={username:"",password:"",submitted:!1,loading:!1,error:""},a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleSumit=a.handleSumit.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(m.a)({},a,n))}},{key:"handleSumit",value:function(e){var t=this;e.preventDefault(),this.setState({submitted:!0});var a=this.state,n=a.username,i=a.password;f.add("Authorization","Basic dGVzdGU6dGVzdGU="),v.login(n,i).then((function(e){window.location.hash="#/escolhe_ficha"}),(function(e){return t.setState({error:e,loading:!1})})),window.location.hash="#/escolhe_ficha"}},{key:"render",value:function(){return i.a.createElement(j.a,null,i.a.createElement(H.a,{className:"d-flex justify-content-center"},i.a.createElement(S.a,{md:5},i.a.createElement(g.a,{onSubmit:this.handleSumit},i.a.createElement(g.a.Group,{controlId:"formBasicUsername"},i.a.createElement(g.a.Label,{column:!1},"Username"),i.a.createElement(g.a.Control,{type:"text",placeholder:"Enter username",name:"username",onChange:this.handleChange}),i.a.createElement(g.a.Text,{className:"text-muted"})),i.a.createElement(g.a.Group,{controlId:"formBasicPassword"},i.a.createElement(g.a.Label,{column:!1},"Password"),i.a.createElement(g.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:this.handleChange})),i.a.createElement(O.a,{variant:"outline-secondary",type:"submit"},"Aceder")))))}}]),t}(i.a.Component),P=(a(107),function(){function e(t){Object(r.a)(this,e),this.idFicha=void 0,this.idRaca=-1,this.idCidade=-1,this.idJogador=-1,this.nomePersonagem="",this.img="",this.idade=0,this.afiliacao="",this.cla="",this.sorteDia=-1,this.distForca=0,this.distConstituicao=0,this.distAgilidade=0,this.distDestreza=0,this.distInteligencia=0,this.distSabedoria=0,this.distCarisma=0,this.nivelPersonagem=1,this.expPersonagem=0,this.descPersonagem="",this.histPersonagem="",this.nota="",this.idSanidade=0,this.raca={},this.caminhos=[],this.descendencias=[],this.habilidades=[],this.habitos=[],this.idiomas=[],this.inventarios=[],this.patronos=[],this.situacoes=[],this.especializacoes=[],this.idFicha=t}return Object(c.a)(e,[{key:"getById",value:function(){var e=this;return fetch("api/ficha/id/"+this.idFicha,{method:"GET",headers:f.getMyHeaders()}).then((function(e){return e.json()})).then((function(t){e.setFichaFromObject(t)})),this}},{key:"setFichaFromObject",value:function(e){this.idRaca=e.idRaca,this.idCidade=e.idCidade,this.idJogador=e.idJogador,this.nomePersonagem=e.nomePersonagem,this.img=e.img,this.idade=e.idade,this.afiliacao=e.afiliacao,this.cla=e.cla,this.sorteDia=e.sorteDia,this.distForca=e.distForca,this.distAgilidade=e.distAgilidade,this.distCarisma=e.distCarisma,this.distConstituicao=e.distConstituicao,this.distDestreza=e.distDestreza,this.distSabedoria=e.distSabedoria,this.distInteligencia=e.distInteligencia,this.nivelPersonagem=e.nivelPersonagem,this.expPersonagem=e.expPersonagem,this.descPersonagem=e.descPersonagem,this.histPersonagem=e.histPersonagem,this.nota=e.nota,this.idSanidade=e.idSanidade,this.raca=e.raca,this.caminhos=e.caminhos,this.descendencias=e.descendencias,this.habilidades=e.habilidades,this.habitos=e.habitos,this.idiomas=e.idiomas,this.inventarios=e.inventarios,this.patronos=e.patronos,this.situacoes=e.situacoes,this.especializacoes=e.especializacoes}}],[{key:"findByIdJogador",value:function(){return fetch("api/ficha/jogador",{method:"GET",headers:f.getMyHeaders(),credentials:"include"}).then((function(e){return e.json()})).then((function(e){return e}))}},{key:"update",value:function(e){return fetch("api/ficha/",{method:"PUT",headers:f.getMyHeaders(),body:JSON.stringify(e)})}}]),e}()),I=function(){function e(){Object(r.a)(this,e),this._racas=void 0,this._caminhos=[],this._cidades=void 0,this._descendencias=void 0,this._habilidades=void 0,this._habitos=void 0,this._idiomas=void 0,this._patronos=void 0,this._especializacoes=void 0;var t=localStorage.getItem("sistema");t?this.setSistemaFromObject(JSON.parse(t)):this.sistemaGetRequest()}return Object(c.a)(e,[{key:"sistemaGetRequest",value:function(){var e=this;fetch("api/sistema",{method:"GET",headers:f.getMyHeaders(),credentials:"include"}).then((function(e){return e.json()})).then((function(t){localStorage.setItem("sistema",JSON.stringify(t)),e.setSistemaFromObject(t)}))}},{key:"setSistemaFromObject",value:function(e){this._racas=e.racas,this._caminhos=e.caminhos,this._cidades=e.cidades,this._descendencias=e.descendencias,this._habilidades=e.habilidades,this._habitos=e.habitos,this._idiomas=e.idiomas,this._patronos=e.patronos,this._especializacoes=e.especializacoes}}],[{key:"sistema",get:function(){return void 0===this._sistema&&(this._sistema=new e),this._sistema}},{key:"racas",get:function(){return void 0!==this.sistema._racas?this.sistema._racas:[]}},{key:"caminhos",get:function(){return void 0!==this.sistema._caminhos?this.sistema._caminhos:[]}},{key:"cidades",get:function(){return void 0!==this.sistema._cidades?this.sistema._cidades:[]}},{key:"descendencias",get:function(){return void 0!==this.sistema._descendencias?this.sistema._descendencias:[]}},{key:"especializacoes",get:function(){return void 0!==this.sistema._especializacoes?this.sistema._especializacoes:[]}},{key:"habilidades",get:function(){return void 0!==this.sistema._habilidades?this.sistema._habilidades:[]}},{key:"habitos",get:function(){return void 0!==this.sistema._habitos?this.sistema._habitos:[]}},{key:"idiomas",get:function(){return void 0!==this.sistema._idiomas?this.sistema._idiomas:[]}},{key:"patronos",get:function(){return void 0!==this.sistema._patronos?this.sistema._patronos:[]}}]),e}();I._sistema=void 0;var x=a(62),_=a.n(x),R=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={resumoFichas:[],sistema:I.sistema},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){console.log(this.state.resumoFichas)}},{key:"componentDidMount",value:function(){var e=this;this.fetchResumoFichas(),P.findByIdJogador().then((function(t){e.setState({resumoFichas:t})}))}},{key:"handleAction",value:function(e){window.location.hash="#/ficha?idFicha="+e}},{key:"fetchResumoFichas",value:function(){var e=this;return this.state.resumoFichas.map((function(t){return n.createElement(O.a,{variant:"outline-dark",onClick:e.handleAction.bind(e,t.idFicha)},n.createElement(H.a,null,n.createElement(S.a,{className:"corpo"},n.createElement("label",null,"Nome: "),n.createElement("h3",null,t.nomePersonagem)),n.createElement(S.a,null,n.createElement(_.a,null))))}))}},{key:"render",value:function(){var e=this;return n.createElement(j.a,null,this.state.resumoFichas.map((function(t){return n.createElement(O.a,{className:"ficha-sel",variant:"outline-dark",onClick:e.handleAction.bind(e,t.idFicha)},n.createElement(H.a,null,n.createElement(S.a,{className:"corpo"},n.createElement("label",null,"Nome: "),n.createElement("h3",null,t.nomePersonagem)),n.createElement(S.a,null,n.createElement(_.a,{src:t.img,alt:"fail to load"}))))})))}}]),t}(n.Component),A=a(75),z=a.n(A),N=a(83),B=a.n(N),K=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={readOnly:!0,nomePersonagem:a.props.ficha.nomePersonagem},a.onDoubleClick=a.onDoubleClick.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){e.ficha.nomePersonagem!==this.props.ficha.nomePersonagem&&this.setState({nomePersonagem:this.props.ficha.nomePersonagem})}},{key:"onDoubleClick",value:function(){this.setState({readOnly:!1})}},{key:"onBlur",value:function(){this.setState({readOnly:!0});var e=this.props.ficha;e.nomePersonagem=this.state.nomePersonagem,this.props.updateFicha(e)}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({nomePersonagem:t})}},{key:"render",value:function(){return i.a.createElement(g.a.Control,{as:"input",type:"text",value:this.state.nomePersonagem,plaintext:this.state.readOnly,readOnly:this.state.readOnly,onDoubleClick:this.onDoubleClick,onBlur:this.onBlur.bind(this),onChange:this.handleChange.bind(this)})}}]),t}(i.a.Component),T=a(76),J=a(146),L=a(77),M=a(152),U=a(78),G=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={readonly:!0,idade:a.props.ficha.idade},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){e.ficha.idade!==this.props.ficha.idade&&this.setState({idade:this.props.ficha.idade})}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({idade:Number(t)})}},{key:"handleBlur",value:function(){var e=this.props.ficha;e.idade=this.state.idade,this.props.updateFicha(e),this.setState({readonly:!0})}},{key:"render",value:function(){var e=this;return n.createElement(T.a,{as:J.a},n.createElement(L.a,{lg:"auto"},n.createElement(M.a.Label,{column:!0,sm:2},"Idade")),n.createElement(L.a,null,n.createElement(U.a,{as:"input",type:"number",plaintext:!0,readOnly:this.state.readonly,value:this.state.idade.toString(),onDoubleClick:function(){return e.setState({readonly:!1})},onBlur:this.handleBlur.bind(this),onChange:this.handleChange.bind(this)})))}}]),t}(n.Component),W=a(39),q=a.n(W),V=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={nivelPersonagem:a.props.ficha.nivelPersonagem,readonly:!0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){e.ficha.nivelPersonagem!==this.props.ficha.nivelPersonagem&&this.setState({nivelPersonagem:this.props.ficha.nivelPersonagem})}},{key:"handleDoubleClick",value:function(){this.setState({readonly:!1})}},{key:"handleBlur",value:function(){var e=this.props.ficha;e.nivelPersonagem=this.state.nivelPersonagem,this.props.updateFicha(e),this.setState({readonly:!0})}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({nivelPersonagem:Number(t)})}},{key:"render",value:function(){return i.a.createElement(T.a,{as:J.a},i.a.createElement(M.a.Label,{column:!0,sm:2},"Nivel"),i.a.createElement(L.a,null,i.a.createElement(q.a,{as:"input",type:"number",value:this.state.nivelPersonagem.toString(),readOnly:this.state.readonly,plaintext:this.state.readonly,onDoubleClick:this.handleDoubleClick.bind(this),onBlur:this.handleBlur.bind(this),onChange:this.handleChange.bind(this)})))}}]),t}(i.a.Component),Q=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={expPersonagem:a.props.ficha.expPersonagem,readonly:!0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){e.ficha.expPersonagem!==this.props.ficha.expPersonagem&&this.setState({expPersonagem:this.props.ficha.expPersonagem})}},{key:"handleOnChange",value:function(e){var t=e.target.value;this.setState({expPersonagem:Number(t)})}},{key:"handleOnBlur",value:function(){if(this.setState({readonly:!0}),this.state.expPersonagem!==this.props.ficha.expPersonagem){var e=this.props.ficha;e.expPersonagem=this.state.expPersonagem,this.props.updateFicha(e)}}},{key:"render",value:function(){var e=this;return i.a.createElement(T.a,{as:J.a},i.a.createElement(M.a.Label,{column:!0,sm:2},"Exp"),i.a.createElement(L.a,null,i.a.createElement(q.a,{as:"input",type:"number",value:this.state.expPersonagem.toString(),readOnly:this.state.readonly,plaintext:this.state.readonly,onDoubleClick:function(){return e.setState({readonly:!1})},onChange:this.handleOnChange.bind(this),onBlur:this.handleOnBlur.bind(this)})))}}]),t}(i.a.Component),$=a(45),X=a(88),Y=a(49),Z=a(46),ee=a(47),te=a(84),ae=a.n(te),ne=a(148),ie=a(147),se=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.habilidade;return i.a.createElement(ie.a,null,i.a.createElement(J.a,null,e.descHabilidade))}}]),t}(i.a.Component),re=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"update",value:function(e,t){var a=this.findIndex(e,this.props.habilidades),n=this.props.habilidades.map((function(e,n){return n===a?t:e}));return this.props.updateHabilidades(n)}},{key:"add",value:function(e){return this.props.updateHabilidades(this.props.habilidades.concat(e))}},{key:"delete",value:function(e){return this.props.updateHabilidades(this.props.habilidades.filter((function(t){return t.idHabilidade!==e.idHabilidade})))}},{key:"findIndex",value:function(e,t){return t.findIndex((function(t){return t.idHabilidade===e.idHabilidade}))}},{key:"render",value:function(){var e=this;return i.a.createElement(ne.a.Container,{id:"habilidades-personagem"},i.a.createElement(J.a,null,i.a.createElement(L.a,{lg:3},i.a.createElement(X.a,{className:"flex-column"},this.props.habilidades.map((function(e,t){return i.a.createElement(Y.a,{key:t},i.a.createElement(X.a.Link,{eventKey:t},e.nomeHabilidade))})))),i.a.createElement(L.a,null,i.a.createElement(Z.a,null,this.props.habilidades.map((function(t,a){return i.a.createElement(ee.a,{key:a,eventKey:a},i.a.createElement(se,{update:e.update.bind(e),add:e.add.bind(e),delete:e.delete.bind(e),habilidade:t}))}))))))}}]),t}(i.a.Component),ce=a(149),le=a(151),oe=a(81),de=a(153),he=a(82),ue=a(150),me=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={raca:a.props.raca,show:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value,a=I.racas.find((function(e){return e.idRaca.toString()===t}));a?this.setState({raca:a}):alert("Ops Algo deu errado!")}},{key:"handleOnSave",value:function(){this.props.updateRaca(this.state.raca),this.handleOnHide()}},{key:"handleOnHide",value:function(){this.setState({show:!1})}},{key:"handleOnClick",value:function(){this.setState({show:!0,raca:this.props.raca})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(ce.a,{variant:"light",block:!0,onClick:this.handleOnClick.bind(this)},this.props.raca.nomeRaca),i.a.createElement(le.a,{show:this.state.show,onHide:this.handleOnHide.bind(this)},i.a.createElement(le.a.Header,{closeButton:!0},i.a.createElement(g.a.Control,{value:this.state.raca.idRaca?this.state.raca.idRaca.toString():"0",as:"select",onChange:this.handleChange.bind(this)},I.racas.map((function(e,t){return i.a.createElement("option",{key:t,value:e.idRaca},e.nomeRaca)})))),i.a.createElement(oe.a,null,i.a.createElement(de.a,{defaultActiveKey:"descRaca",id:"tab-raca"},this.tabDesc(),this.tabAtributos(),this.tabCultura(),this.tabHistoria())),i.a.createElement(he.a,null,i.a.createElement(ce.a,{onClick:this.handleOnSave.bind(this)},"Save"))))}},{key:"tabDesc",value:function(){return i.a.createElement(ne.a,{eventKey:"descRaca",title:"Descri\xe7\xe3o"},i.a.createElement(J.a,null,i.a.createElement(L.a,null,"Raridade: ",this.state.raca.raridadeRaca),i.a.createElement(L.a,null,"Longevidade: ",this.state.raca.longevidadeRaca)),i.a.createElement(J.a,null,i.a.createElement(L.a,null,"Descri\xe7\xe3o:",this.state.raca.descRaca)))}},{key:"tabCultura",value:function(){if(this.state.raca.culturaRaca)return i.a.createElement(ne.a,{title:"Cultura",eventKey:"culturaRaca"},i.a.createElement(J.a,null,i.a.createElement(L.a,null,this.state.raca.culturaRaca)))}},{key:"tabHistoria",value:function(){return this.state.raca.historiaRaca?i.a.createElement(ne.a,{title:"Hist\xf3ria",eventKey:"historiaRaca"},i.a.createElement(J.a,null,i.a.createElement(L.a,null,this.state.raca.historiaRaca))):i.a.createElement(ne.a,{title:"Hist\xf3ria",disabled:!0})}},{key:"tabAtributos",value:function(){return i.a.createElement(ne.a,{title:"Atributos",eventKey:"atributosRaca"},i.a.createElement(J.a,null,i.a.createElement(L.a,null,i.a.createElement(ue.a,null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Sangue"),i.a.createElement("td",null,this.state.raca.sangue)),i.a.createElement("tr",null,i.a.createElement("th",null,"Vigor"),i.a.createElement("td",null,this.state.raca.vigor)),i.a.createElement("tr",null,i.a.createElement("th",null,"FOR"),i.a.createElement("td",null,this.state.raca.racaForca)),i.a.createElement("tr",null,i.a.createElement("th",null,"CON"),i.a.createElement("td",null,this.state.raca.racaConstituicao)),i.a.createElement("tr",null,i.a.createElement("th",null,"AGI"),i.a.createElement("td",null,this.state.raca.racaAgilidade)),i.a.createElement("tr",null,i.a.createElement("th",null,"DES"),i.a.createElement("td",null,this.state.raca.racaDestreza)),i.a.createElement("tr",null,i.a.createElement("th",null,"INT"),i.a.createElement("td",null,this.state.raca.racaInteligencia)),i.a.createElement("tr",null,i.a.createElement("th",null,"SAB"),i.a.createElement("td",null,this.state.raca.racaSabedoria)),i.a.createElement("tr",null,i.a.createElement("th",null,"CAR"),i.a.createElement("td",null,this.state.raca.racaCarisma)))))))}}]),t}(i.a.Component),pe=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={caminho:a.props.caminho,isInvalid:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){!e.show&&this.props.show&&this.setState({caminho:this.props.caminho})}},{key:"handleInvalid",value:function(){var e=this;this.setState({isInvalid:!0}),setTimeout((function(){return e.setState({isInvalid:!1})}),1e3)}},{key:"handleChange",value:function(e){var t=e.target.value,a=I.caminhos.find((function(e){return e.idCaminho===Number(t)}));void 0!==a?this.setState({caminho:a,isInvalid:!1}):alert("Ops algo deu errado!")}},{key:"render",value:function(){var e=this;return n.createElement(L.a,null,n.createElement(le.a,{show:this.props.show,onHide:function(){return e.props.handleHide()}},n.createElement(le.a.Header,{closeButton:!0},n.createElement(U.a,{value:this.state.caminho.idCaminho.toString(),onChange:this.handleChange.bind(this),as:"select",isInvalid:this.state.isInvalid},I.caminhos.map((function(e,t){return n.createElement("option",{value:e.idCaminho.toString(),key:t},e.nomeCaminho)})))),n.createElement(oe.a,null,n.createElement(de.a,{defaultActiveKey:"descCaminho",id:"tab-caminho"},this.tabDesc())),n.createElement(he.a,null,this.renderBotoes())))}},{key:"renderBotoes",value:function(){var e=this,t=[];return void 0!==this.props.add&&t.push(n.createElement(ce.a,{onClick:function(){e.props.add(e.state.caminho)?e.props.handleHide():e.handleInvalid()},key:"1"},"Add")),void 0!==this.props.update&&t.push(n.createElement(ce.a,{onClick:function(){e.props.update(e.state.caminho,e.props.caminho)?e.props.handleHide():e.handleInvalid()},key:"2"},"update")),void 0!==this.props.delete&&t.push(n.createElement(ce.a,{onClick:function(){return e.props.delete(e.state.caminho)?e.props.handleHide():e.handleInvalid()},key:"3"},"delete")),t}},{key:"tabDesc",value:function(){return n.createElement(ne.a,{eventKey:"descCaminho",title:"Descri\xe7\xe3o"},this.state.caminho.descCaminho)}}]),t}(n.Component),fe=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={showPlus:!1,shows:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updateCaminhos",value:function(e,t){var a=this.props.caminhos,n=this.findIndex(t,this.props.caminhos);return-1!==n&&(a[n]=e,this.props.updateCaminhos(a))}},{key:"addCaminho",value:function(e){var t=this.props.caminhos;return-1===this.findIndex(e,t)&&(t.push(e),this.props.updateCaminhos(t))}},{key:"deleteCaminho",value:function(e){var t=this.props.caminhos,a=this.findIndex(e,t);return-1===a||(t.splice(a,1),this.props.updateCaminhos(t))}},{key:"findIndex",value:function(e,t){return t.findIndex((function(t){return t.idCaminho===e.idCaminho}))}},{key:"handleShow",value:function(e){void 0!==e?this.setState((function(t){return t.shows[e]=!0,{shows:t.shows}})):this.setState({showPlus:!0})}},{key:"handleHide",value:function(e){void 0!==e?this.setState((function(t){return t.shows[e]=!1,{shows:t.shows}})):this.setState({showPlus:!1})}},{key:"render",value:function(){var e=this,t=this.props.caminhos;return n.createElement(ie.a,null,n.createElement(L.a,null,"caminhos",this.renderAddCaminho(),t.map((function(t,a){return n.createElement(J.a,{key:a},n.createElement(L.a,{md:5},n.createElement(ce.a,{variant:"light",block:!0,onClick:function(){return e.handleShow(a)}},t.nomeCaminho)),n.createElement(L.a,{style:{paddingLeft:0,paddingRight:0}},n.createElement(pe,{caminho:t,show:e.state.shows[a],add:e.addCaminho.bind(e),update:e.updateCaminhos.bind(e),delete:e.deleteCaminho.bind(e),handleHide:function(){return e.handleHide(a)}}),n.createElement(ce.a,{size:"sm",variant:"outline-danger",onClick:function(){return e.deleteCaminho(t)}},"\u2715")))}))))}},{key:"renderAddCaminho",value:function(){var e=this;if(0===this.props.caminhos.length)return n.createElement(J.a,null,n.createElement(ce.a,{variant:"light",block:!0,onClick:function(){return e.handleShow()}},"Novo Caminho"),n.createElement(pe,{caminho:I.caminhos[0],add:this.addCaminho.bind(this),show:this.state.showPlus,handleHide:function(){return e.handleHide()}}))}}]),t}(n.Component),ve=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={descendencia:a.props.descendencia,value:a.props.descendencia.idDescendencia.toString(),isInvalid:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value,a=I.descendencias.find((function(e){return e.idDescendencia===Number(t)}));void 0!==a?this.setState({descendencia:a,value:t,isInvalid:!1}):alert("Ops algo deu errado!")}},{key:"componentDidUpdate",value:function(e,t,a){!e.show&&this.props.show&&this.setState({value:this.props.descendencia.idDescendencia.toString(),descendencia:this.props.descendencia})}},{key:"handleInvalid",value:function(){var e=this;this.setState({isInvalid:!0}),setTimeout((function(){return e.setState({isInvalid:!1})}),1e3)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(le.a,{show:this.props.show,onHide:function(){return e.props.handleHide()}},i.a.createElement(le.a.Header,{closeButton:!0},i.a.createElement(U.a,{value:this.state.value,onChange:this.handleChange.bind(this),as:"select",plaintext:!1,isInvalid:this.state.isInvalid},I.descendencias.map((function(e,t){return i.a.createElement("option",{value:e.idDescendencia.toString(),key:t},e.nomeDescendencia)})))),i.a.createElement(oe.a,null,i.a.createElement(de.a,{defaultActiveKey:"descDescendencia",id:"tab-escolha-descendencia"},this.tabDesc(),this.tabHabilidade(),this.tabHabitos())),i.a.createElement(he.a,null,this.renderBotoes())))}},{key:"renderBotoes",value:function(){var e=this,t=[];return void 0!==this.props.add&&t.push(i.a.createElement(ce.a,{onClick:function(){e.props.add(e.state.descendencia)?e.props.handleHide():e.handleInvalid()},key:"1"},"Add")),void 0!==this.props.update&&t.push(i.a.createElement(ce.a,{onClick:function(){e.props.update(e.state.descendencia,e.props.descendencia)?e.props.handleHide():e.handleInvalid()},key:"2"},"update")),void 0!==this.props.delete&&t.push(i.a.createElement(ce.a,{onClick:function(){return e.props.delete(e.state.descendencia)?e.props.handleHide():e.handleInvalid()},key:"3"},"delete")),t}},{key:"tabDesc",value:function(){return this.state.descendencia?i.a.createElement(ne.a,{eventKey:"descDescendencia",title:"Descri\xe7\xe3o"},i.a.createElement(J.a,null,i.a.createElement(L.a,null,this.state.descendencia.descDescendencia))):i.a.createElement(ne.a,{eventKey:"descDescendencia",title:"Descri\xe7\xe3o",disabled:!0},"empty")}},{key:"tabHabilidade",value:function(){return this.state.descendencia&&this.state.descendencia.habilidades.length>0?i.a.createElement(ne.a,{eventKey:"habilidades",title:"habilidades"},i.a.createElement(L.a,null,this.state.descendencia.habilidades.map((function(e,t){return i.a.createElement(J.a,{key:t},i.a.createElement(L.a,null,e.nomeHabilidade),i.a.createElement(L.a,null,e.descHabilidade))})))):i.a.createElement(ne.a,{eventKey:"habilidades",title:"habilidades",disabled:!0},"empty")}},{key:"tabHabitos",value:function(){return this.state.descendencia&&this.state.descendencia.habitos.length>0?i.a.createElement(ne.a,{eventKey:"habitos",title:"habitos"},i.a.createElement(ue.a,null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Nome"),i.a.createElement("th",null,"Quantidade"))),i.a.createElement("tbody",null,this.state.descendencia.habitos.map((function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,e.nomeHabito),i.a.createElement("td",null,e.qtdFichaHabito))}))))):i.a.createElement(ne.a,{eventKey:"habitos",title:"habitos",disabled:!0},"empty")}}]),t}(i.a.Component),be=(a(139),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={show:[],showPlus:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updateDescendencia",value:function(e,t){var a=this.props.descendencias,n=this.findIndex(t,a);return-1!==n&&(a[n]=e,this.props.updateDescendencias(a))}},{key:"addDescendencia",value:function(e){var t=this.props.descendencias;return-1===this.findIndex(e,this.props.descendencias)&&(t.push(e),this.props.updateDescendencias(t))}},{key:"deleteDescendencia",value:function(e){var t=this.props.descendencias,a=this.findIndex(e,t);return-1!==a&&(t.splice(a,1),this.props.updateDescendencias(t))}},{key:"findIndex",value:function(e,t){return t.findIndex((function(t){return t.idDescendencia===e.idDescendencia}))}},{key:"handleShow",value:function(e){void 0!==e?this.setState((function(t){return t.show[e]=!0,{show:t.show}})):this.setState({showPlus:!0})}},{key:"handleHide",value:function(e){void 0!==e?this.setState((function(t){return t.show[e]=!1,{show:t.show}})):this.setState({showPlus:!1})}},{key:"render",value:function(){var e=this,t=this.props.descendencias;return i.a.createElement(ie.a,null,i.a.createElement(J.a,null,i.a.createElement(L.a,null,i.a.createElement(M.a.Label,{column:!1},"Descendencias")),i.a.createElement(L.a,null,i.a.createElement(ce.a,{size:"sm",variant:"outline-info",onClick:function(){return e.handleShow()}},"+"),i.a.createElement(ve,{descendencia:I.descendencias[0],add:this.addDescendencia.bind(this),show:this.state.showPlus,handleHide:function(){return e.handleHide()}}))),t.map((function(t,a){return i.a.createElement(J.a,{key:a},i.a.createElement(L.a,{md:8},i.a.createElement(ce.a,{variant:"light",block:!0,onClick:function(){return e.handleShow(a)}},t.nomeDescendencia)),i.a.createElement(L.a,{md:"auto"},i.a.createElement(ve,{descendencia:t,show:e.state.show[a],update:e.updateDescendencia.bind(e),add:e.addDescendencia.bind(e),delete:e.deleteDescendencia.bind(e),handleHide:function(){return e.handleHide(a)}})),i.a.createElement(L.a,{md:!0,style:{paddingLeft:0,paddingRight:0}},i.a.createElement(ce.a,{size:"sm",variant:"outline-danger",onClick:function(){return e.deleteDescendencia(t)}},"\u2715")))})))}}]),t}(i.a.Component)),Ee=a(50),ye=a.n(Ee),ge=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={ficha:Object.assign({},a.props.ficha),readonly:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.ficha;return n.createElement(ye.a,{hover:!0,size:"sm",striped:!0},n.createElement("thead",null,n.createElement("tr",{className:"thead-dark"},n.createElement("th",null,"Atributos"),n.createElement("th",null,"Ra\xe7a"),n.createElement("th",null,"Distribuido"),n.createElement("th",null,"Total"))),n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",null,"FOR"),n.createElement("td",null,e.raca.racaForca),n.createElement("td",null,n.createElement(U.a,{as:"input",plaintext:!0,readOnly:!0,value:e.distForca.toString(),type:"number"})),n.createElement("td",null,e.distForca+(void 0!==e.raca.racaForca?e.raca.racaForca:0))),n.createElement("tr",null,n.createElement("th",null,"CON"),n.createElement("td",null,e.raca.racaConstituicao),n.createElement("td",null,e.distConstituicao),n.createElement("td",null,e.distConstituicao+(void 0!==e.raca.racaConstituicao?e.raca.racaConstituicao:0))),n.createElement("tr",null,n.createElement("th",null,"AGI"),n.createElement("td",null,e.raca.racaAgilidade),n.createElement("td",null,e.distAgilidade),n.createElement("td",null,e.distForca+(void 0!==e.raca.racaForca?e.raca.racaForca:0))),n.createElement("tr",null,n.createElement("th",null,"DES"),n.createElement("td",null,e.raca.racaDestreza),n.createElement("td",null,e.distDestreza),n.createElement("td",null,e.distAgilidade+(void 0!==e.raca.racaAgilidade?e.raca.racaAgilidade:0))),n.createElement("tr",null,n.createElement("th",null,"INT"),n.createElement("td",null,e.raca.racaInteligencia),n.createElement("td",null,e.distInteligencia),n.createElement("td",null,e.distInteligencia+(void 0!==e.raca.racaInteligencia?e.raca.racaInteligencia:0))),n.createElement("tr",null,n.createElement("th",null,"SAB"),n.createElement("td",null,e.raca.racaSabedoria),n.createElement("td",null,e.distSabedoria),n.createElement("td",null,e.distSabedoria+(void 0!==e.raca.racaSabedoria?e.raca.racaSabedoria:0))),n.createElement("tr",null,n.createElement("th",null,"CAR"),n.createElement("td",null,e.raca.racaCarisma),n.createElement("td",null,e.distCarisma),n.createElement("td",null,e.distCarisma+(void 0!==e.raca.racaCarisma?e.raca.racaCarisma:0)))))}}]),t}(n.Component),ke=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={habitos:a.props.habitos},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){JSON.stringify(e.habitos)!==JSON.stringify(this.props.habitos)&&this.setState({habitos:this.props.habitos})}},{key:"render",value:function(){var e=this,t=this.props.habitos;return n.createElement(ye.a,{hover:!0,size:"sm"},n.createElement("thead",{className:"thead-dark"},n.createElement("tr",null,n.createElement("th",null,"Habito"),n.createElement("th",null,"Quantidade"),n.createElement("th",null,"Especiliza\xe7\xf5es"))),n.createElement("tbody",null,t.map((function(t){var a="";return void 0!=e.props.especializacoes&&void 0!=t.especializacoes&&e.props.especializacoes.filter((function(e){return t.especializacoes.some((function(t){return e.idEspecializacao===t.idEspecializacao}))})).forEach((function(e){a+=""===a?e.nomeEspecializacao:", "+e.nomeEspecializacao})),n.createElement("tr",{key:t.idHabito},n.createElement("td",null,t.nomeHabito),n.createElement("td",null,t.qtdFichaHabito),n.createElement("td",null,a||""))}))))}}]),t}(n.Component),Oe=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updateDescendencias",value:function(e){return this.props.updateFicha(Object.assign(new P(this.props.ficha.idFicha),this.props.ficha,{descendencias:e})),!0}},{key:"updateCaminhos",value:function(e){return this.props.updateFicha(Object.assign(new P(this.props.ficha.idFicha),this.props.ficha,{caminhos:e})),!0}},{key:"updateRaca",value:function(e){return this.props.updateFicha(Object.assign(new P(this.props.ficha.idFicha),this.props.ficha,{raca:e,idRaca:e.idRaca})),!0}},{key:"updateHabitos",value:function(e){return this.props.updateFicha(Object.assign(new P(this.props.ficha.idFicha),this.props.ficha,{habittos:e})),!0}},{key:"render",value:function(){var e=this.props.ficha;return i.a.createElement(H.a,null,i.a.createElement(S.a,{md:6},i.a.createElement(H.a,null,i.a.createElement(S.a,null,"Ra\xe7a",i.a.createElement(me,{updateRaca:this.updateRaca.bind(this),raca:e.raca})),i.a.createElement(S.a,null,i.a.createElement(fe,{updateCaminhos:this.updateCaminhos.bind(this),caminhos:e.caminhos}))),i.a.createElement(H.a,null,i.a.createElement(be,{descendencias:e.descendencias,updateDescendencias:this.updateDescendencias.bind(this)}))),i.a.createElement(S.a,null,i.a.createElement(H.a,null,i.a.createElement(ge,{ficha:e})),i.a.createElement(H.a,null,i.a.createElement(ke,{habitos:e.habitos,updateHabitos:this.updateHabitos.bind(this),especializacoes:e.especializacoes}))))}}]),t}(i.a.Component),Ce=(a(140),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).ws=new WebSocket("ws://localhost:9000/chat/1"),a.state={fichaBatalha:a.props.ficha},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={user:"teste",action:"JOINED",message:"xuxa"};this.ws.onopen=function(){console.log("WebSocket Client Connected"),e.ws.send(JSON.stringify(t))},this.ws.onmessage=function(e){console.log(e)}}},{key:"render",value:function(){return n.createElement("p",null,"Estou tentando ao menos.")}}]),t}(n.Component)),je=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={ficha:new P(Number(z.a.parse(window.location.href.split("?")[1]).idFicha)),sistema:I.sistema,show:new Map([["ficha","block"],["quadroDeBatalha","none"],["inventario","none"]]),loading:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("api/ficha/id/"+this.state.ficha.idFicha,{method:"GET",headers:f.getMyHeaders()}).then((function(e){return e.json()})).then((function(t){e.setState({ficha:t}),e.asynFichFetch()}))}},{key:"asynFichFetch",value:function(){var e=this;console.log("Waiting for async response"),fetch("api/ficha/async/id/"+this.state.ficha.idFicha,{method:"GET",headers:f.getMyHeaders()}).then((function(e){return e.json()})).then((function(t){e.setState({ficha:t})})).then((function(){return e.asynFichFetch()}))}},{key:"updateFicha",value:function(e){var t=this;console.log(e),this.setState({loading:!0}),P.update(e).then((function(e){return e.ok?(console.log("Ficha atualizada com sucesso."),!0):(console.log("Status "+e.statusText),!1)})).then((function(a){return t.setState({ficha:e,loading:!1}),a}))}},{key:"updateHabilidades",value:function(e){return!0}},{key:"render",value:function(){var e=this.state.ficha;return n.createElement(j.a,{fluid:!0},n.createElement(H.a,null,n.createElement(S.a,{md:2},n.createElement(K,{updateFicha:this.updateFicha.bind(this),ficha:e})),n.createElement(S.a,{md:2},n.createElement(G,{updateFicha:this.updateFicha.bind(this),ficha:e})),n.createElement(S.a,{md:2},n.createElement(V,{updateFicha:this.updateFicha.bind(this),ficha:e})),n.createElement(S.a,{md:2},n.createElement(Q,{updateFicha:this.updateFicha.bind(this),ficha:e})),n.createElement(S.a,{md:2},"Vida////////Estado////////"),n.createElement(S.a,{className:"d-flex justify-content-end"},n.createElement(B.a,null,n.createElement(O.a,{size:"sm",variant:"secondary",onClick:this.componentDidMount.bind(this)},"Reload"),n.createElement(O.a,{size:"sm",variant:"secondary"},"Retornar"),n.createElement(O.a,{size:"sm",variant:"secondary"},"Sair")))),n.createElement($.a,{id:"ficha-personagem",defaultActiveKey:"ficha"},n.createElement(X.a,{variant:"tabs"},n.createElement(Y.a,null,n.createElement(X.a.Link,{eventKey:"ficha"},"Ficha")),n.createElement(Y.a,null,n.createElement(X.a.Link,{eventKey:"quadroDeBatalha"},"Quadro de Batalha")),n.createElement(Y.a,null,n.createElement(X.a.Link,{eventKey:"inventario"},"Invent\xe1rio")),n.createElement(Y.a,null,n.createElement(X.a.Link,{eventKey:"habilidades"},"Habilidades")),n.createElement(ae.a,{animation:"border",variant:"primary",style:{float:"right",marginLeft:"auto",display:this.state.loading?"inline-block":"none"}})),n.createElement(Z.a,null,n.createElement(ee.a,{eventKey:"ficha"},n.createElement(Oe,{ficha:e,updateFicha:this.updateFicha.bind(this)})),n.createElement(ee.a,{eventKey:"quadroDeBatalha"},n.createElement(Ce,{ficha:e})),n.createElement(ee.a,{eventKey:"inventario"},"INVENTARIO"),n.createElement(ee.a,{eventKey:"habilidades"},n.createElement(re,{habilidades:e.habilidades,updateHabilidades:this.updateHabilidades.bind(this)})))))}}]),t}(n.Component),we=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(h.a,null,i.a.createElement(u.c,null,i.a.createElement(u.a,{path:"/",exact:!0,component:F}),i.a.createElement(u.a,{path:"/escolhe_ficha",component:R}),i.a.createElement(u.a,{path:"/ficha",component:je}))))}}]),t}(i.a.Component),Se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function De(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(143);s.render(n.createElement(we,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Se?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):De(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):De(t,e)}))}}()},89:function(e,t,a){e.exports=a(144)},94:function(e,t,a){},95:function(e,t,a){}},[[89,1,2]]]);
//# sourceMappingURL=main.3884814f.chunk.js.map